<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CNN Diagnostics</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; max-width: 800px; margin: 0 auto; }
        .test-section { margin: 30px 0; padding: 20px; border: 1px solid #ddd; border-radius: 8px; }
        .status { padding: 10px; margin: 10px 0; border-radius: 4px; }
        .status.success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .status.error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .status.warning { background: #fff3cd; color: #856404; border: 1px solid #ffeaa7; }
        button { padding: 10px 20px; margin: 5px; cursor: pointer; }
        canvas { border: 1px solid #000; margin: 10px; }
    </style>
</head>
<body>
    <h1>CNN Website Diagnostics</h1>
    
    <div class="test-section">
        <h2>1. JavaScript Loading</h2>
        <div id="js-status" class="status warning">Testing...</div>
    </div>
    
    <div class="test-section">
        <h2>2. Class Instantiation</h2>
        <div id="class-status" class="status warning">Testing...</div>
    </div>
    
    <div class="test-section">
        <h2>3. Canvas Elements</h2>
        <div id="canvas-status" class="status warning">Testing...</div>
        <canvas id="test-canvas" width="200" height="200"></canvas>
    </div>
    
    <div class="test-section">
        <h2>4. Event Handlers</h2>
        <div id="event-status" class="status warning">Testing...</div>
        <button id="test-button">Test Button</button>
    </div>
    
    <div class="test-section">
        <h2>5. Step Navigation</h2>
        <div id="step-status" class="status warning">Testing...</div>
        <button class="step-btn" data-step="0">Step 0</button>
        <button class="step-btn" data-step="1">Step 1</button>
    </div>

    <script>
        let testResults = {
            js: false,
            classes: false,
            canvas: false,
            events: false,
            steps: false
        };

        // Test 1: JavaScript Loading
        try {
            testResults.js = true;
            document.getElementById('js-status').textContent = 'JavaScript is loading properly';
            document.getElementById('js-status').className = 'status success';
        } catch (e) {
            document.getElementById('js-status').textContent = 'JavaScript loading failed: ' + e.message;
            document.getElementById('js-status').className = 'status error';
        }

        // Test 2: Class availability
        setTimeout(() => {
            try {
                if (typeof CNNVisualization !== 'undefined' && typeof CNNWebsite !== 'undefined') {
                    const viz = new CNNVisualization();
                    testResults.classes = true;
                    document.getElementById('class-status').textContent = 'Classes instantiate successfully';
                    document.getElementById('class-status').className = 'status success';
                } else {
                    throw new Error('Classes not defined');
                }
            } catch (e) {
                document.getElementById('class-status').textContent = 'Class instantiation failed: ' + e.message;
                document.getElementById('class-status').className = 'status error';
            }
        }, 100);

        // Test 3: Canvas functionality
        setTimeout(() => {
            try {
                const canvas = document.getElementById('test-canvas');
                const ctx = canvas.getContext('2d');
                ctx.fillStyle = 'blue';
                ctx.fillRect(10, 10, 50, 50);
                testResults.canvas = true;
                document.getElementById('canvas-status').textContent = 'Canvas rendering works';
                document.getElementById('canvas-status').className = 'status success';
            } catch (e) {
                document.getElementById('canvas-status').textContent = 'Canvas failed: ' + e.message;
                document.getElementById('canvas-status').className = 'status error';
            }
        }, 200);

        // Test 4: Event handlers
        setTimeout(() => {
            try {
                const btn = document.getElementById('test-button');
                btn.addEventListener('click', () => {
                    alert('Event handler works!');
                });
                testResults.events = true;
                document.getElementById('event-status').textContent = 'Event handlers work';
                document.getElementById('event-status').className = 'status success';
            } catch (e) {
                document.getElementById('event-status').textContent = 'Event handlers failed: ' + e.message;
                document.getElementById('event-status').className = 'status error';
            }
        }, 300);

        // Test 5: Step navigation
        setTimeout(() => {
            try {
                document.querySelectorAll('.step-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        const step = e.target.dataset.step;
                        console.log('Step clicked:', step);
                    });
                });
                testResults.steps = true;
                document.getElementById('step-status').textContent = 'Step navigation works';
                document.getElementById('step-status').className = 'status success';
            } catch (e) {
                document.getElementById('step-status').textContent = 'Step navigation failed: ' + e.message;
                document.getElementById('step-status').className = 'status error';
            }
        }, 400);

        // Summary
        setTimeout(() => {
            const passed = Object.values(testResults).filter(r => r).length;
            const total = Object.keys(testResults).length;
            console.log(`Tests passed: ${passed}/${total}`);
            
            if (passed === total) {
                console.log('All tests passed! The issue might be in specific interactions.');
            } else {
                console.log('Some tests failed. Check the specific failures above.');
            }
        }, 1000);
    </script>
    
    <script src="script-clean.js"></script>
</body>
</html>
